l

Redis几种数据类型。
1、String，一个key对应一个value。
2、Hash，就像插入时，hashname，key，value。一个hashtable中有多个keyvalue。
3、List，就像一个双向队列，但是里面只能有一个value，而没有key。
4、Set，就是一个不允许重复的列表。	


1、定义一个alluser的set，来存储所有用户信息，因为不能重复嘛。
是用一个结构体存的：
里面存放的：
{
picName:random.randint(1,4)+jpeg
location:pic
name:username
}

而大厅聊天室的数据，则是一个list。list不能设置过期时间，本来还想设置过期时间的。
名字就叫做room_001
而存的也是一个结构体json：
{
content:
date:
self:

}



2、每个聊天都可以用一个聊天室来决定，聊天室的话可以用“root+unix当前时间戳来”，用List来表示。有以下特点：
	1）、List里面数据是有生存周期的，默认可以设置，比如1天。
	2）、不用hash的原因，是hash里面如果key重复会发生替换，我用list，就把某一个聊天信息里面的某一条记录作为一条信息存储到list。
	3）、聊天室不是用来保存数据，因为是用的websocket，所以直接是吧接受到的数据，按照聊天室把他们都返回回去，然后再存到服务器redis，保值24h，当新用户加入聊天室时候，可以看过去24小时的聊天记录。
	4）、大厅聊天室，需要特定不变的号码。

3、聊天室id要和用户名字对应起来。这里用hash来存储，用户名为key，而聊天室id为value，因为，一个人，一个浏览器只能开一个聊天界面，cookie控制。

4、还需要一个，username和room_num对应的表，说明那些用户在哪些房间里面。

当前在线人员，可以通过是否websocket断开连接来判断。


